# ROAMS

This is an API built with Flask that uses GPT-2 to generate text based on a given prompt. 
It includes functionality to store the generated texts in a SQLite database and to retrieve the history of generated texts.


## Features

- **Text Generation**: Generate text based on a prompt using the GPT-2 model.
- **History**: Retrieve a list of previously generated texts.
- **Authentication**: Secure endpoints using a bearer token.

## Prerequisites

Before running the application, ensure you have the following installed:

- Python 3.9
- pip

## Setup

### Clone repository 
```bash
git clone https://github.com/raqblasua/ROAMS.git
cd text-generation-api
```
### Create and activate virtual enviroment
```bash
python -m venv venv
source venv/bin/activate  # On Windows, use venv\Scripts\activate
```

### Install dependencies
```bash
pip install -r requirements.txt
```

### Running the API
```bash
python app/main.py
```

## API Endpoints

### Generate Text (POST /generate)
This endpoint generates text based on the provided prompt using the GPT-2 model.
- Request
    - Headers: 
        * Authorization: Bearer <TOKEN>
    - Body(JSON):
    ```json
        {   
            "prompt": "Once upon a time",
            "max_length": 50,
            "temperature": 1.0,
            "top_p": 0.9
        }
    ```
- Response:
    - Success (200):
    ```json
        {
            "generated_text": "Once upon a time, there was a brave knight..."
        }
    ```
    - Success (400):
    ```json
        {   
          "error": "Prompt is required"
        }
    ```
    - Success (403):
    ```json
        {   
            "error": "Unauthorized"
        }
    ```
### Get History (GET /history)
This endpoint retrieves the list of all previously generated texts.

- Request:
    - Headers: 
        * Authorization: Bearer <TOKEN>
- Response:
     - Success (200): 

    ```json
        {
            [
                {
                    "id": 1,
                    "prompt": "Once upon a time",
                    "generated_text": "Once upon a time, there was a brave knight..."
                },
                {
                    "id": 2,
                    "prompt": "In a galaxy far far away",
                    "generated_text": "In a galaxy far far away, a hero rose..."
                }
            ]
        }
    ```
    - Success (403):
     ```json
        {
            "error": "Unauthorized"
        }
     ```

## Swagger Documentation
You can view the API documentation generated by Swagger at the following URL:

http://127.0.0.1:5000/apidocs

